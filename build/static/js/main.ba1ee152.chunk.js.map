{"version":3,"sources":["tools/scrollInView.js","components/scrollInView/scrollInView.js","App.js","index.js"],"names":["events","isElementInViewport","el","rect","getBoundingClientRect","top","bottom","window","innerHeight","document","documentElement","clientHeight","scrollHandler","i","length","dom","ref","callback","splice","removeEventListener","ret","add","addEventListener","push","remove","removeIndex","findIndex","e","ScrollInView","type","children","addClass","args","useRef","useEffect","curDom","current","scrollInViewFun","classList","options","React","createElement","App","className","anime","targets","translateX","width","duration","ReactDOM","render","StrictMode","getElementById"],"mappings":"wNAAMA,EAAS,GAETC,EAAsB,SAACC,GACzB,IAAMC,EAAOD,EAAGE,wBAChB,OAAQD,EAAKE,KAAO,GAAKF,EAAKG,QAAU,GAAOH,EAAKG,SAAWC,OAAOC,aAAeC,SAASC,gBAAgBC,eAAiBR,EAAKE,MAAQE,OAAOC,aAAeC,SAASC,gBAAgBC,eAAmBR,EAAKE,KAAO,GAAKF,EAAKG,SAAWC,OAAOC,aAAeC,SAASC,gBAAgBC,eAG5RC,EAAgB,SAAhBA,IACF,IAAK,IAAIC,EAAI,EAAGA,EAAIb,EAAOc,OAAQD,IAAK,CACpC,IAAME,EAAMf,EAAOa,GAAGG,IAClBf,EAAoBc,KACpBf,EAAOa,GAAGI,SAASF,GACnBf,EAAOkB,OAAOL,EAAG,GACjBA,KAGc,IAAlBb,EAAOc,QACPP,OAAOY,oBAAoB,SAAUP,IAuB9BQ,EAFH,CAAEC,IAjBF,SAACL,EAAKC,GACQ,IAAlBjB,EAAOc,QACPP,OAAOe,iBAAiB,SAAUV,GAEtCZ,EAAOuB,KAAK,CAAEP,MAAKC,cAaJO,OAVJ,SAACR,GACZ,IAAMS,EAAczB,EAAO0B,WAAU,SAACC,GAAD,OAAOA,EAAEX,MAAQA,KAClDS,GAAe,GACfzB,EAAOkB,OAAOO,EAAa,GAET,IAAlBzB,EAAOc,QACPP,OAAOY,oBAAoB,SAAUP,KCT9BgB,EAjBM,SAAC,GAAqD,IAAnDC,EAAkD,EAAlDA,KAAMC,EAA4C,EAA5CA,SAAUb,EAAkC,EAAlCA,SAAUc,EAAwB,EAAxBA,SAAaC,EAAW,yDAChEjB,EAAMkB,mBACZC,qBAAU,WACN,IAAMC,EAASpB,EAAIqB,QAKnB,OAJAC,EAAgBhB,IAAIc,GAAQ,SAACpB,GACzBE,GAAYA,EAASF,GACrBgB,GAAYhB,EAAIuB,UAAUjB,IAAIU,MAE3B,WACHM,EAAgBb,OAAOW,MAE5B,CAAClB,EAAUc,IAEd,IAAMQ,EAAO,aAAKvB,IAAKD,GAAQiB,GAC/B,OAAOQ,IAAMC,cAAcZ,GAAQ,MAAOU,EAAST,I,OCWxCY,MA3Bf,WACI,OACI,sBAAKC,UAAU,MAAf,UACI,cAAC,EAAD,CACIA,UAAU,MACV1B,SAAU,SAACF,GACP6B,YAAM,CACFC,QAAS9B,EACT+B,WAAY,SAIxB,cAAC,EAAD,CACIH,UAAU,MACVZ,SAAS,SACTd,SAAU,SAACF,GACP6B,YAAM,CACFC,QAAS9B,EACTgC,MAAO,IACPC,SAAU,aCrBlCC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF1C,SAAS2C,eAAe,W","file":"static/js/main.ba1ee152.chunk.js","sourcesContent":["const events = [];\r\n\r\nconst isElementInViewport = (el) => {\r\n    const rect = el.getBoundingClientRect();\r\n    return (rect.top <= 0 && rect.bottom >= 0) || (rect.bottom >= (window.innerHeight || document.documentElement.clientHeight) && rect.top <= (window.innerHeight || document.documentElement.clientHeight)) || (rect.top >= 0 && rect.bottom <= (window.innerHeight || document.documentElement.clientHeight));\r\n};\r\n\r\nconst scrollHandler = () => {\r\n    for (let i = 0; i < events.length; i++) {\r\n        const dom = events[i].ref;\r\n        if (isElementInViewport(dom)) {\r\n            events[i].callback(dom);\r\n            events.splice(i, 1);\r\n            i--;\r\n        }\r\n    }\r\n    if (events.length === 0) {\r\n        window.removeEventListener(\"scroll\", scrollHandler);\r\n    }\r\n};\r\n\r\nconst add = (ref, callback) => {\r\n    if (events.length === 0) {\r\n        window.addEventListener(\"scroll\", scrollHandler);\r\n    }\r\n    events.push({ ref, callback });\r\n};\r\n\r\nconst remove = (ref) => {\r\n    const removeIndex = events.findIndex((e) => e.ref === ref);\r\n    if (removeIndex > -1) {\r\n        events.splice(removeIndex, 1);\r\n    }\r\n    if (events.length === 0) {\r\n        window.removeEventListener(\"scroll\", scrollHandler);\r\n    }\r\n};\r\n\r\nconst ret = { add, remove };\r\n\r\nexport default ret;\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport scrollInViewFun from \"../../tools/scrollInView\";\r\n\r\n/**\r\n * type: dom元素的類型，預設為div\r\n * callback: 進入畫面後要觸發的函式\r\n * addClass: 進入畫面後會新增的class\r\n */\r\nconst ScrollInView = ({ type, children, callback, addClass, ...args }) => {\r\n    const dom = useRef();\r\n    useEffect(() => {\r\n        const curDom = dom.current;\r\n        scrollInViewFun.add(curDom, (dom) => {\r\n            callback && callback(dom);\r\n            addClass && dom.classList.add(addClass);\r\n        });\r\n        return () => {\r\n            scrollInViewFun.remove(curDom);\r\n        };\r\n    }, [callback, addClass]);\r\n\r\n    const options = { ref: dom, ...args };\r\n    return React.createElement(type || \"div\", options, children);\r\n};\r\n\r\nexport default ScrollInView;\r\n","import \"./App.css\";\nimport ScrollInView from \"./components/scrollInView/scrollInView\";\n\n//這裡使用一般的 anime 來展示 callback 的效果，不然可以考慮使用 react-animejs\nimport anime from \"animejs/lib/anime.es.js\";\n\nfunction App() {\n    return (\n        <div className=\"App\">\n            <ScrollInView\n                className=\"box\"\n                callback={(dom) => {\n                    anime({\n                        targets: dom,\n                        translateX: 250,\n                    });\n                }}\n            ></ScrollInView>\n            <ScrollInView\n                className=\"box\"\n                addClass=\"active\"\n                callback={(dom) => {\n                    anime({\n                        targets: dom,\n                        width: 600,\n                        duration: 3000,\n                    });\n                }}\n            ></ScrollInView>\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}